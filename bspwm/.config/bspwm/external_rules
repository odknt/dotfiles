#!/bin/sh
# vim: sw=2 ts=2 sts=2 et
# arguments: 1=Window ID, 2=Class, 3=Instance

HINTS="$(xprop -id "${1}" WM_NORMAL_HINTS)"
LOCATION="$(echo "${HINTS}" | grep -Po '(?<=program specified location: ).*(?=$)')"
GRAVITY="$(echo "${HINTS}" | grep -Po '(?<=window gravity: ).*(?=$)')"

if [ "${GRAVITY}" = 'Static' -a -n "${LOCATION}" ]; then
  echo 'state=floating border=on'
  return
fi

if [ "${2}" = 'firefox' ]; then
  ROLE="$(xprop -id "${1}" WM_WINDOW_ROLE | grep -Po '(?<= ").*(?=")')"
  case "${ROLE}" in
    About|page-info) echo 'state=floating' ;;
  esac
  return
fi
