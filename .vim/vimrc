if has('vim_starting')
  set encoding=utf-8
endif
scriptencoding utf-8
set fileencoding=utf-8 fileencodings=utf-8,sjis,enc-jp bomb binary nofixendofline
filetype off
filetype plugin indent off
set autoindent expandtab
set noruler nonumber regexpengine=1
set regexpengine=1
set nowritebackup notitle noswapfile
set noequalalways splitbelow splitright
set lazyredraw ttyfast novisualbell t_ut= belloff=all background=dark
set mouse=
set nohlsearch incsearch ignorecase smartcase wrapscan noshowmatch
set emoji ambiwidth=double
set switchbuf=usetab,newtab
set showmode modeline modelines=10
let &g:statusline=' %f%m%r%h%w%=%{&filetype} [%{&fileencoding}][%{&fileformat}] [%l/%L] '
set linebreak showbreak=>
set wrap breakindent breakindentopt=shift:4,sbr

if &encoding ==? 'utf-8' && &term != 'linux'
  exec "set fillchars=vert:\u23AE,fold:\u23BC,diff:\u23BC"
  set list listchars=tab:˫\ ,trail:-,extends:»,precedes:«,nbsp:%
else
  set fillchars=vert:\|,fold:-,diff:.
endif

if executable('rg')
  set grepformat=%f:%l:%c:%m,%f:%l:%m
  set grepprg=rg\ --vimgrep\ --no-heading\ --glob\ '!tags'
endif
command! -nargs=+ Grep execute 'silent grep! <args>' | copen 20

if has('unnamedplus')
  set clipboard^=unnamed,unnamedplus
elseif has('clipboard')
  set clipboard^=unnamed
endif

hi SpecialKey ctermbg=none ctermfg=12
hi NonText ctermbg=none ctermfg=1
hi VertSplit ctermfg=black ctermbg=61

let @d = ':bp|bw! #'
let g:netrw_use_errorwindow = 0
let g:netrw_banner = 0
let g:fzf_action = {'ctrl-t': 'tab drop', 'ctrl-x': 'split', 'ctrl-v': 'vsplit'}

command! FZFFiles call fzf#run(fzf#wrap({
  \ 'source': 'rg --no-ignore-vcs --files --hidden --follow --ignore-file ~/.rgignore',
  \ }))
nnoremap <C-p> :FZF<CR>

"" for privacy
if filereadable(expand('~/.vim/vimrc-local'))
  source ~/.vim/vimrc-local
endif

filetype on
